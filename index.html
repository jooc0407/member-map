<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í˜‘íšŒ íšŒì›ì‚¬ ì§€ë„ ê´€ë¦¬</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; }
        
        .login-container { 
            min-height: 100vh; 
            background: linear-gradient(135deg, #e0f2fe 0%, #bfdbfe 100%);
            display: flex; 
            align-items: center; 
            justify-content: center; 
            padding: 20px;
        }
        .login-box { 
            background: white; 
            border-radius: 12px; 
            box-shadow: 0 10px 40px rgba(0,0,0,0.1);
            padding: 40px; 
            width: 100%; 
            max-width: 400px;
        }
        .login-title { 
            font-size: 24px; 
            font-weight: bold; 
            text-align: center; 
            margin-bottom: 8px;
            color: #1e40af;
        }
        .login-subtitle { 
            text-align: center; 
            color: #6b7280; 
            margin-bottom: 32px;
        }
        .input-group { margin-bottom: 20px; }
        .input-label { 
            display: block; 
            font-size: 14px; 
            font-weight: 500; 
            margin-bottom: 8px;
            color: #374151;
        }
        .input-field { 
            width: 100%; 
            padding: 12px; 
            border: 1px solid #d1d5db; 
            border-radius: 8px;
            font-size: 14px;
        }
        .input-field:focus { 
            outline: none; 
            border-color: #2563eb; 
            box-shadow: 0 0 0 3px rgba(37,99,235,0.1);
        }
        .btn { 
            width: 100%; 
            padding: 12px; 
            border: none; 
            border-radius: 8px; 
            font-weight: 500; 
            cursor: pointer;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            transition: all 0.2s;
        }
        .btn-primary { 
            background: #2563eb; 
            color: white;
        }
        .btn-primary:hover { background: #1d4ed8; }
        .error-box { 
            background: #fef2f2; 
            border: 1px solid #fecaca; 
            border-radius: 8px; 
            padding: 12px; 
            color: #dc2626; 
            font-size: 14px;
            margin-bottom: 16px;
        }
        .success-box { 
            background: #f0fdf4; 
            border: 1px solid #bbf7d0; 
            border-radius: 8px; 
            padding: 12px; 
            color: #16a34a; 
            font-size: 14px;
            margin: 12px 24px 0;
        }
        .info-box { 
            background: #f9fafb; 
            border-radius: 8px; 
            padding: 16px; 
            margin-top: 24px;
        }
        
        .main-container { 
            display: flex; 
            flex-direction: column; 
            height: 100vh;
        }
        .header { 
            background: white; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            flex-wrap: wrap;
            gap: 12px;
        }
        .header-title { 
            display: flex; 
            align-items: center; 
            gap: 12px;
            font-size: 18px;
            font-weight: bold;
        }
        .header-actions { 
            display: flex; 
            gap: 12px; 
            flex-wrap: wrap;
            align-items: center;
        }
        .btn-small { 
            padding: 8px 16px; 
            border: none; 
            border-radius: 8px; 
            font-size: 14px; 
            font-weight: 500;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }
        .btn-green { background: #16a34a; color: white; }
        .btn-green:hover { background: #15803d; }
        .btn-purple { background: #9333ea; color: white; }
        .btn-purple:hover { background: #7e22ce; }
        .btn-gray { background: #6b7280; color: white; }
        .btn-gray:hover { background: #4b5563; }
        
        .map-container { 
            flex: 1; 
            position: relative;
        }
        #map { 
            width: 100%; 
            height: 100%;
        }
        
        .legend { 
            position: absolute; 
            top: 16px; 
            left: 16px; 
            background: white; 
            border-radius: 12px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 16px;
            max-width: 250px;
            z-index: 100;
        }
        .legend-title { 
            font-weight: bold; 
            margin-bottom: 12px;
            font-size: 14px;
        }
        .legend-item { 
            display: flex; 
            align-items: center; 
            gap: 8px; 
            margin-bottom: 8px;
            font-size: 13px;
        }
        .legend-dot { 
            width: 12px; 
            height: 12px; 
            border-radius: 50%;
        }
        .legend-stats { 
            margin-top: 12px; 
            padding-top: 12px; 
            border-top: 1px solid #e5e7eb;
            font-size: 12px;
            color: #6b7280;
        }
        
        .detail-panel { 
            position: absolute; 
            top: 16px; 
            right: 16px; 
            background: white; 
            border-radius: 12px; 
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            padding: 20px;
            width: 340px;
            max-height: 80vh;
            overflow-y: auto;
            z-index: 100;
        }
        .detail-header { 
            display: flex; 
            justify-content: space-between; 
            align-items: start;
            margin-bottom: 16px;
        }
        .detail-title { 
            font-weight: bold; 
            font-size: 16px;
        }
        .detail-subtitle { 
            font-size: 12px; 
            color: #6b7280;
            margin-top: 4px;
        }
        .close-btn { 
            background: none; 
            border: none; 
            cursor: pointer; 
            color: #9ca3af;
            font-size: 20px;
            padding: 0;
            width: 24px;
            height: 24px;
        }
        .close-btn:hover { color: #4b5563; }
        .detail-section { 
            margin-bottom: 12px;
            font-size: 13px;
        }
        .detail-label { 
            color: #6b7280; 
            margin-bottom: 4px;
            font-size: 12px;
        }
        .detail-value { 
            font-weight: 500;
        }
        .detail-grid { 
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 12px;
        }
        .btn-navi { 
            width: 100%; 
            background: #facc15; 
            color: #1f2937; 
            margin-top: 16px;
        }
        .btn-navi:hover { background: #eab308; }
        
        select { 
            padding: 8px 12px; 
            border: 1px solid #d1d5db; 
            border-radius: 8px;
            font-size: 14px;
        }
        
        .hidden { display: none; }
        
        @media (max-width: 768px) {
            .header { flex-direction: column; align-items: stretch; }
            .detail-panel { width: calc(100% - 32px); }
            .legend { max-width: calc(100% - 32px); }
        }
    </style>
</head>
<body>
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div style="text-align: center; margin-bottom: 24px;">
                <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
            </div>
            <h1 class="login-title">í˜‘íšŒ íšŒì›ì‚¬ ê´€ë¦¬</h1>
            <p class="login-subtitle">ì„ì§ì› ì „ìš© ì‹œìŠ¤í…œ</p>
            
            <div id="errorMsg" class="error-box hidden"></div>
            
            <div class="input-group">
                <label class="input-label">ë¹„ë°€ë²ˆí˜¸</label>
                <input type="password" id="passwordInput" class="input-field" placeholder="ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”">
            </div>
            
            <button onclick="login()" class="btn btn-primary">
                <span>ğŸ”‘</span> ë¡œê·¸ì¸
            </button>
            
            <div class="info-box">
                <p style="font-size: 13px; color: #6b7280;">
                    <strong>ë°ëª¨ ë¹„ë°€ë²ˆí˜¸:</strong> admin1234
                </p>
            </div>
        </div>
    </div>

    <div id="mainScreen" class="main-container hidden">
        <header class="header">
            <div class="header-title">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="#2563eb" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
                <span>í˜‘íšŒ íšŒì›ì‚¬ ì§€ë„ ê´€ë¦¬</span>
            </div>
            <div class="header-actions">
                <div style="display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 14px;">ğŸ“</span>
                    <select id="regionFilter" onchange="filterByRegion()">
                        <option value="ì „ì²´">ì „ì²´</option>
                    </select>
                </div>
                <button onclick="loadSample()" class="btn-small btn-purple">ìƒ˜í”Œ</button>
                <label class="btn-small btn-green" style="cursor: pointer;">
                    <span>ğŸ“¤</span> ì—…ë¡œë“œ
                    <input type="file" id="fileInput" accept=".xlsx,.xls" style="display: none;" onchange="handleFile(event)">
                </label>
                <button onclick="logout()" class="btn-small btn-gray">
                    <span>ğŸšª</span> ë¡œê·¸ì•„ì›ƒ
                </button>
            </div>
        </header>
        
        <div id="successMsg" class="success-box hidden"></div>
        <div id="errorMsg2" class="error-box hidden" style="margin: 12px 24px 0;"></div>
        
        <div class="map-container">
            <div id="map"></div>
            
            <div class="legend">
                <div class="legend-title">ë²”ë¡€</div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #4CAF50;"></div>
                    <span>2026ë…„ ë‚©ë¶€ì™„ë£Œ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #FFC107;"></div>
                    <span>2025ë…„ ë‚©ë¶€ì™„ë£Œ</span>
                </div>
                <div class="legend-item">
                    <div class="legend-dot" style="background: #FF4444;"></div>
                    <span>2025ë…„ ë¯¸ë‚©</span>
                </div>
                <div class="legend-stats">
                    <div>ì§€ì—­: <strong id="currentRegion">ì „ì²´</strong></div>
                    <div>í‘œì‹œ: <strong id="displayCount">0</strong>ê°œ</div>
                    <div>ì „ì²´: <strong id="totalCount">0</strong>ê°œ</div>
                </div>
            </div>
            
            <div id="detailPanel" class="detail-panel hidden"></div>
        </div>
    </div>

    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=3dfec56e257ead2978bc60033728bf38&libraries=services"></script>
    <script>
        let map;
        let markers = [];
        let allMembers = [];
        let filteredMembers = [];
        let geocoder;
        let mapInitialized = false;

        const sampleData = [
            { ê³ ê°ë²ˆí˜¸: 'C001', íšŒì‚¬ëª…: 'ìš¸ì‚°ì œì¡°(ì£¼)', ì—…ì¢…: 'ì œì¡°ì—…', ì—…íƒœ: 'ì² ê°•', íšŒì‚¬ì£¼ì†Œ: 'ìš¸ì‚°ê´‘ì—­ì‹œ ë‚¨êµ¬ ì‚¼ì‚°ë¡œ 100', ë¶€ì„œëª…: 'ì˜ì—…ë¶€', ì§ìœ„: 'ê³¼ì¥', ì „í™”ë²ˆí˜¸: '010-1234-5678', ì§€ì—­ë³¸ë¶€: 'ìš¸ì‚°', íšŒë¹„ê¸ˆì•¡: '100,000', '2024': 'Y', '2025': 'Y', '2026': 'Y', ë‚©ë¶€ì›”: '1ì›”' },
            { ê³ ê°ë²ˆí˜¸: 'C002', íšŒì‚¬ëª…: 'ë™í•´ì‚°ì—…', ì—…ì¢…: 'ì œì¡°ì—…', ì—…íƒœ: 'í™”í•™', íšŒì‚¬ì£¼ì†Œ: 'ìš¸ì‚°ê´‘ì—­ì‹œ ë™êµ¬ ë°©ì–´ì§„ìˆœí™˜ë„ë¡œ 1000', ë¶€ì„œëª…: 'ì´ë¬´ë¶€', ì§ìœ„: 'ëŒ€ë¦¬', ì „í™”ë²ˆí˜¸: '010-2345-6789', ì§€ì—­ë³¸ë¶€: 'ìš¸ì‚°', íšŒë¹„ê¸ˆì•¡: '150,000', '2024': 'Y', '2025': 'Y', '2026': 'N', ë‚©ë¶€ì›”: '3ì›”' },
            { ê³ ê°ë²ˆí˜¸: 'C003', íšŒì‚¬ëª…: 'íƒœí™”ìƒì‚¬', ì—…ì¢…: 'ë„ì†Œë§¤ì—…', ì—…íƒœ: 'ë¬´ì—­', íšŒì‚¬ì£¼ì†Œ: 'ìš¸ì‚°ê´‘ì—­ì‹œ ì¤‘êµ¬ íƒœí™”ë¡œ 200', ë¶€ì„œëª…: 'ê¸°íšë¶€', ì§ìœ„: 'ì°¨ì¥', ì „í™”ë²ˆí˜¸: '010-3456-7890', ì§€ì—­ë³¸ë¶€: 'ìš¸ì‚°', íšŒë¹„ê¸ˆì•¡: '80,000', '2024': 'Y', '2025': 'N', '2026': 'N', ë‚©ë¶€ì›”: '' },
            { ê³ ê°ë²ˆí˜¸: 'C004', íšŒì‚¬ëª…: 'í˜„ëŒ€ì—”ì§€ë‹ˆì–´ë§', ì—…ì¢…: 'ê±´ì„¤ì—…', ì—…íƒœ: 'í† ëª©', íšŒì‚¬ì£¼ì†Œ: 'ìš¸ì‚°ê´‘ì—­ì‹œ ë¶êµ¬ ì‚°ì—…ë¡œ 500', ë¶€ì„œëª…: 'ê³µì‚¬ë¶€', ì§ìœ„: 'ë¶€ì¥', ì „í™”ë²ˆí˜¸: '010-4567-8901', ì§€ì—­ë³¸ë¶€: 'ìš¸ì‚°', íšŒë¹„ê¸ˆì•¡: '200,000', '2024': 'Y', '2025': 'Y', '2026': 'Y', ë‚©ë¶€ì›”: '1ì›”' },
            { ê³ ê°ë²ˆí˜¸: 'C005', íšŒì‚¬ëª…: 'ìš¸ì‚°ì¼€ë¯¸ì¹¼', ì—…ì¢…: 'ì œì¡°ì—…', ì—…íƒœ: 'í™”í•™', íšŒì‚¬ì£¼ì†Œ: 'ìš¸ì‚°ê´‘ì—­ì‹œ ìš¸ì£¼êµ° ì˜¨ì‚°ì ì²˜ìš©ë¡œ 300', ë¶€ì„œëª…: 'ì—°êµ¬ì†Œ', ì§ìœ„: 'íŒ€ì¥', ì „í™”ë²ˆí˜¸: '010-5678-9012', ì§€ì—­ë³¸ë¶€: 'ìš¸ì‚°', íšŒë¹„ê¸ˆì•¡: '120,000', '2024': 'N', '2025': 'Y', '2026': 'N', ë‚©ë¶€ì›”: '6ì›”' }
        ];

        function login() {
            const password = document.getElementById('passwordInput').value;
            if (password === 'admin1234') {
                document.getElementById('loginScreen').classList.add('hidden');
                document.getElementById('mainScreen').classList.remove('hidden');
                initMap();
            } else {
                showError('ë¹„ë°€ë²ˆí˜¸ê°€ ì˜¬ë°”ë¥´ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        function logout() {
            document.getElementById('mainScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
            document.getElementById('passwordInput').value = '';
        }

        function showError(msg) {
            const errorBox = document.getElementById('errorMsg');
            errorBox.textContent = msg;
            errorBox.classList.remove('hidden');
            setTimeout(() => errorBox.classList.add('hidden'), 3000);
        }

        function showSuccess(msg) {
            const successBox = document.getElementById('successMsg');
            successBox.textContent = msg;
            successBox.classList.remove('hidden');
            setTimeout(() => successBox.classList.add('hidden'), 3000);
        }

        function initMap() {
            if (mapInitialized) return;
            
            setTimeout(function() {
                const container = document.getElementById('map');
                const options = {
                    center: new kakao.maps.LatLng(36.5, 127.5),
                    level: 13
                };
                map = new kakao.maps.Map(container, options);
                geocoder = new kakao.maps.services.Geocoder();
                mapInitialized = true;
            }, 100);
        }

        function loadSample() {
            allMembers = sampleData;
            filteredMembers = sampleData;
            updateRegionFilter();
            displayMarkers();
            updateStats();
            showSuccess('âœ“ ìƒ˜í”Œ ë°ì´í„°ê°€ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!');
        }

        function handleFile(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = new Uint8Array(e.target.result);
                    const workbook = XLSX.read(data, { type: 'array' });
                    const sheetName = workbook.SheetNames[0];
                    const sheet = workbook.Sheets[sheetName];
                    const jsonData = XLSX.utils.sheet_to_json(sheet);

                    if (jsonData.length === 0) {
                        showError('ì—‘ì…€ íŒŒì¼ì— ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.');
                        return;
                    }

                    allMembers = jsonData;
                    filteredMembers = jsonData;
                    updateRegionFilter();
                    displayMarkers();
                    updateStats();
                    showSuccess(`âœ“ ${jsonData.length}ê°œ íšŒì›ì‚¬ ë°ì´í„°ê°€ ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤!`);
                } catch (err) {
                    console.error('ì—‘ì…€ ì½ê¸° ì˜¤ë¥˜:', err);
                    showError('ì—‘ì…€ íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                }
            };
            reader.readAsArrayBuffer(file);
            event.target.value = '';
        }

        function updateRegionFilter() {
            const regions = ['ì „ì²´', ...new Set(allMembers.map(m => m.ì§€ì—­ë³¸ë¶€).filter(r => r))];
            const select = document.getElementById('regionFilter');
            select.innerHTML = regions.map(r => `<option value="${r}">${r}</option>`).join('');
        }

        function filterByRegion() {
            const region = document.getElementById('regionFilter').value;
            if (region === 'ì „ì²´') {
                filteredMembers = allMembers;
            } else {
                filteredMembers = allMembers.filter(m => m.ì§€ì—­ë³¸ë¶€ === region);
            }
            displayMarkers();
            updateStats();
            document.getElementById('currentRegion').textContent = region;
        }

        function displayMarkers() {
            if (!map || !geocoder) {
                setTimeout(displayMarkers, 500);
                return;
            }

            markers.forEach(marker => marker.setMap(null));
            markers = [];
            document.getElementById('detailPanel').classList.add('hidden');

            let firstCoords = null;

            filteredMembers.forEach((member, index) => {
                const address = member.íšŒì‚¬ì£¼ì†Œ || member.ì£¼ì†Œ;
                if (!address) return;

                geocoder.addressSearch(address, function(result, status) {
                    if (status === kakao.maps.services.Status.OK) {
                        const coords = new kakao.maps.LatLng(result[0].y, result[0].x);
                        
                        let color = '#FF4444';
                        if (member['2026'] === 'Y') color = '#4CAF50';
                        else if (member['2025'] === 'Y') color = '#FFC107';

                        const markerImage = new kakao.maps.MarkerImage(
                            `data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="30" height="40" viewBox="0 0 30 40"><path fill="${color}" stroke="#fff" stroke-width="2" d="M15 0C8.373 0 3 5.373 3 12c0 8.25 12 28 12 28s12-19.75 12-28c0-6.627-5.373-12-12-12z"/><circle cx="15" cy="12" r="5" fill="#fff"/></svg>`)}`,
                            new kakao.maps.Size(30, 40),
                            { offset: new kakao.maps.Point(15, 40) }
                        );

                        const marker = new kakao.maps.Marker({
                            map: map,
                            position: coords,
                            image: markerImage,
                            title: member.íšŒì‚¬ëª…
                        });

                        kakao.maps.event.addListener(marker, 'click', function() {
                            showDetail(member);
                            map.panTo(coords);
                        });

                        markers.push(marker);

                        if (!firstCoords) {
                            firstCoords = coords;
                            map.setCenter(coords);
                            map.setLevel(8);
                        }
                    }
                });
            });
        }

        function showDetail(member) {
            const panel = document.getElementById('detailPanel');
            const statusText = member['2026'] === 'Y' ? '2026ë…„ ë‚©ë¶€ì™„ë£Œ' : 
                               member['2025'] === 'Y' ? '2025ë…„ ë‚©ë¶€ì™„ë£Œ' : '2025ë…„ ë¯¸ë‚© (íƒˆí‡´ ê°€ëŠ¥ì„±)';
            const statusColor = member['2026'] === 'Y' ? '#16a34a' : 
                                member['2025'] === 'Y' ? '#ca8a04' : '#dc2626';

            panel.innerHTML = `
                <div class="detail-header">
                    <div>
                        <div class="detail-title">${member.íšŒì‚¬ëª… || 'íšŒì‚¬ëª… ì—†ìŒ'}</div>
                        ${member.ê³ ê°ë²ˆí˜¸ ? `<div class="detail-subtitle">ê³ ê°ë²ˆí˜¸: ${member.ê³ ê°ë²ˆí˜¸}</div>` : ''}
                    </div>
                    <button class="close-btn" onclick="document.getElementById('detailPanel').classList.add('hidden')">Ã—</button>
                </div>
                
                ${member.íšŒì‚¬ì£¼ì†Œ || member.ì£¼ì†Œ ? `
                <div class="detail-section" style="padding-bottom: 12px; border-bottom: 1px solid #e5e7eb;">
                    <div class="detail-label">ì£¼ì†Œ</div>
                    <div class="detail-value" style="font-size: 12px;">${member.íšŒì‚¬ì£¼ì†Œ || member.ì£¼ì†Œ}</div>
                </div>` : ''}
                
                <div class="detail-grid">
                    ${member.ì—…ì¢… ? `<div class="detail-section"><div class="detail-label">ì—…ì¢…</div><div class="detail-value">${member.ì—…ì¢…}</div></div>` : ''}
                    ${member.ì—…íƒœ ? `<div class="detail-section"><div class="detail-label">ì—…íƒœ</div><div class="detail-value">${member.ì—…íƒœ}</div></div>` : ''}
                    ${member.ë¶€ì„œëª… ? `<div class="detail-section"><div class="detail-label">ë¶€ì„œ</div><div class="detail-value">${member.ë¶€ì„œëª…}</div></div>` : ''}
                    ${member.ì§ìœ„ ? `<div class="detail-section"><div class="detail-label">ì§ìœ„</div><div class="detail-value">${member.ì§ìœ„}</div></div>` : ''}
                    ${member.ì „í™”ë²ˆí˜¸ ? `<div class="detail-section"><div class="detail-label">ì „í™”</div><div class="detail-value">${member.ì „í™”ë²ˆí˜¸}</div></div>` : ''}
                    ${member.íšŒë¹„ê¸ˆì•¡ ? `<div class="detail-section"><div class="detail-label">íšŒë¹„</div><div class="detail-value">${member.íšŒë¹„ê¸ˆì•¡}ì›</div></div>` : ''}
                </div>
                
                <div style="border-bottom: 1px solid #e5e7eb; margin: 12px 0;"></div>
                
                <div class="detail-section">
                    <div class="detail-label">ë‚©ë¶€ í˜„í™©</div>
                    <div style="font-size: 12px; margin-top: 8px;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <span>2024ë…„</span>
                            <span style="color: ${member['2024'] === 'Y' ? '#2563eb' : '#9ca3af'}; font-weight: ${member['2024'] === 'Y' ? 'bold' : 'normal'};">
                                ${member['2024'] === 'Y' ? 'ë‚©ë¶€' : 'ë¯¸ë‚©'}
                            </span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 4px;">
                            <span>2025ë…„</span>
                            <span style="color: ${member['2025'] === 'Y' ? '#ca8a04' : '#9ca3af'}; font-weight: ${member['2025'] === 'Y' ? 'bold' : 'normal'};">
                                ${member['2025'] === 'Y' ? 'ë‚©ë¶€' : 'ë¯¸ë‚©'}
                            </span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span>2026ë…„</span>
                            <span style="color: ${member['2026'] === 'Y' ? '#16a34a' : '#9ca3af'}; font-weight: ${member['2026'] === 'Y' ? 'bold' : 'normal'};">
                                ${member['2026'] === 'Y' ? 'ë‚©ë¶€' : 'ë¯¸ë‚©'}
                            </span>
                        </div>
                    </div>
                </div>
                
                ${member['2025'] === 'Y' && member['2026'] === 'N' && member.ë‚©ë¶€ì›” ? `
                <div style="background: #fef3c7; padding: 12px; border-radius: 8px; margin-top: 12px;">
                    <div class="detail-label">ì˜ˆìƒ ë‚©ë¶€ì›”</div>
                    <div style="font-weight: bold; color: #ca8a04;">${member.ë‚©ë¶€ì›”}</div>
                </div>` : ''}
                
                <div style="border-bottom: 1px solid #e5e7eb; margin: 12px 0;"></div>
                
                <div class="detail-section">
                    <div class="detail-label">í˜„ì¬ ìƒíƒœ</div>
                    <div style="font-weight: bold; color: ${statusColor};">${statusText}</div>
                </div>
                
                <button class="btn btn-small btn-navi" onclick="openNavi('${member.íšŒì‚¬ì£¼ì†Œ || member.ì£¼ì†Œ}')">
                    ğŸ§­ ì¹´ì¹´ì˜¤ë‚´ë¹„
                </button>
            `;
            
            panel.classList.remove('hidden');
        }

        function openNavi(address) {
            window.open(`kakaomap://route?ep=${encodeURIComponent(address)}&by=CAR`, '_blank');
        }

        function updateStats() {
            document.getElementById('displayCount').textContent = filteredMembers.length;
            document.getElementById('totalCount').textContent = allMembers.length;
        }

        document.getElementById('passwordInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') login();
        });
    </script>
</body>
</html>
